<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NHS Wales Solutions Exchange - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    
    <style>
        .featured-card {
            border: 2px solid #ffc107 !important;
            position: relative;
        }
        
        .featured-card::before {
            content: 'â˜… FEATURED';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ffc107;
            color: #000;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
            z-index: 10;
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="assets/img/nhswales_logo_black and white.jpg" alt="NHS Wales Logo" style="height: 40px;">
                <span class="ms-2">GitHub GIG Cymru: Solutions Exchange</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="solutions.html">Solutions Exchange</a></li>
                    <li class="nav-item"><a class="nav-link" href="guides.html">Guides</a></li>
                    <li class="nav-item"><a class="nav-link btn btn-primary text-white ms-2 px-3" href="signup.html">Sign Up</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-section text-white text-center">
        <div class="container">
            <h1 class="display-4">Explore NHS Wales Repositories</h1>
            <p class="lead">Access our comprehensive collection of NHS Wales data repositories, complete with user guides and training resources to support your work.</p>
            <a href="solutions.html" class="btn btn-primary btn-lg">View Solutions Exchange</a>
        </div>
    </header>

    <!-- Statistics Section -->
    <section id="statistics" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4">Solutions by Wales for everyone.</h2>
            <div id="metrics" class="row text-center">
                <!-- Metrics will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Success Stories Section -->
    <section id="success-stories" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">Success Stories</h2>
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="success-story mb-4">
                        <div class="row align-items-center">
                            <div class="col-md-3">
                                <img src="assets/img/ndrlogo.png" alt="PHW Success Story" class="img-fluid rounded">
                            </div>
                            <div class="col-md-9">
                                <h4>PHW Cookie Cutter Cutting the Cookies</h4>
                                <p class="text-muted">Our innovative approach to standardizing data processing workflows has revolutionized how Public Health Wales manages and analyzes health data across multiple departments.</p>
                            </div>
                        </div>
                    </div>
                    <div class="success-story mb-4">
                        <div class="row align-items-center">
                            <div class="col-md-3">
                                <img src="assets/img/information.jpg" alt="Emergency Department Success" class="img-fluid rounded">
                            </div>
                            <div class="col-md-9">
                                <h4>Emergency Department Forecasting Excellence</h4>
                                <p class="text-muted">Advanced predictive analytics helping emergency departments across Wales optimize staffing and resource allocation, leading to improved patient outcomes and reduced waiting times.</p>
                            </div>
                        </div>
                    </div>
                    <div class="success-story mb-4">
                        <div class="row align-items-center">
                            <div class="col-md-3">
                                <img src="assets/img/network image.jpg" alt="Collaboration Success" class="img-fluid rounded">
                            </div>
                            <div class="col-md-9">
                                <h4>Cross-Organisation Data Collaboration</h4>
                                <p class="text-muted">Breaking down silos between health boards through shared GitHub repositories, enabling unprecedented collaboration on analytics projects and shared learning initiatives.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <a href="guides.html" class="btn btn-outline-primary">Read More Success Stories</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Solutions Section -->
    <section id="featured" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Featured Solutions</h2>
            <div class="row">
                <!-- Featured item 1 -->
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="assets/img/information.jpg" class="card-img-top" alt="ED Analysis Forecast" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">ED Analysis Forecast</h5>
                            <p class="card-text">Advanced emergency department forecasting tools to predict patient flow and optimize resource allocation across Welsh health boards.</p>
                        </div>
                    </div>
                </div>
                <!-- Featured item 2 -->
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="assets/img/network image.jpg" class="card-img-top" alt="Data Analytics Platform" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Data Analytics Platform</h5>
                            <p class="card-text">Comprehensive analytics solution for healthcare data processing, visualization, and insights generation for evidence-based decision making.</p>
                        </div>
                    </div>
                </div>
                <!-- Featured item 3 -->
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="assets/img/ndrlogo.png" class="card-img-top" alt="Clinical Decision Support" style="height: 200px; object-fit: cover; padding: 2rem; background: #f8f9fa;">
                        <div class="card-body">
                            <h5 class="card-title">Clinical Decision Support</h5>
                            <p class="card-text">AI-powered tools to assist healthcare professionals in making informed clinical decisions with real-time data insights and evidence-based recommendations.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- User Feedback Section -->
    <section id="user-feedback" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">User Feedback</h2>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100 testimonial-card">
                        <div class="card-body text-center">
                            <div class="mb-3">
                                <img src="assets/img/nhs_wales_logo.png" alt="Rebecca" class="rounded-circle testimonial-avatar" style="width: 60px; height: 60px; object-fit: cover;">
                            </div>
                            <blockquote class="blockquote">
                                <p>"The Solutions Exchange has transformed how we share and collaborate on data analytics projects across Aneurin Bevan UHB. A terrific piece of innovation!"</p>
                            </blockquote>
                            <footer class="blockquote-footer">
                                <strong>Rebecca</strong><br>
                                <small class="text-muted">Aneurin Bevan UHB</small>
                            </footer>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 testimonial-card">
                        <div class="card-body text-center">
                            <div class="mb-3">
                                <img src="assets/img/nhs_wales_logo.png" alt="Jason" class="rounded-circle testimonial-avatar" style="width: 60px; height: 60px; object-fit: cover;">
                            </div>
                            <blockquote class="blockquote">
                                <p>"GitHub GIG Cymru has revolutionized our approach to open-source healthcare solutions. The collaborative environment is exceptional!"</p>
                            </blockquote>
                            <footer class="blockquote-footer">
                                <strong>Jason</strong><br>
                                <small class="text-muted">DHCW</small>
                            </footer>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 testimonial-card">
                        <div class="card-body text-center">
                            <div class="mb-3">
                                <img src="assets/img/nhs_wales_logo.png" alt="Cerys" class="rounded-circle testimonial-avatar" style="width: 60px; height: 60px; object-fit: cover;">
                            </div>
                            <blockquote class="blockquote">
                                <p>"The comprehensive repository collection and user guides have significantly accelerated our data science projects at Hywel Dda."</p>
                            </blockquote>
                            <footer class="blockquote-footer">
                                <strong>Cerys</strong><br>
                                <small class="text-muted">Hywel Dda UHB</small>
                            </footer>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How to Contribute -->
    <section id="contribute" class="py-5 bg-light">
        <div class="container text-center">
            <h2>Join the Community</h2>
            <p class="lead">Help us build the future of digital health in Wales.</p>
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <a href="signup.html" class="btn btn-success btn-lg w-100">
                                <i class="fas fa-user-plus me-2"></i>Join GitHub GIG Cymru
                            </a>
                        </div>
                        <div class="col-md-6 mb-3">
                            <a href="guides.html" class="btn btn-outline-primary btn-lg w-100">
                                <i class="fas fa-book me-2"></i>Read the Guides
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <a href="solutions.html" class="btn btn-outline-secondary btn-lg w-100">
                                <i class="fas fa-search me-2"></i>Browse Solutions
                            </a>
                        </div>
                        <div class="col-md-6 mb-3">
                            <a href="https://github.com/GIGCymru" target="_blank" class="btn btn-outline-info btn-lg w-100">
                                <i class="fab fa-github me-2"></i>Visit GitHub
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Health Boards Carousel Section -->
    <section class="health-boards-carousel py-5 bg-white">
        <div class="container">
            <h2 class="text-center mb-5">Explore Health Board Solutions</h2>
            <p class="text-center text-muted mb-4">Discover innovative solutions from across NHS Wales health boards and organizations</p>
            
            <div id="healthBoardsCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="4000">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#healthBoardsCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#healthBoardsCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#healthBoardsCarousel" data-bs-slide-to="2"></button>
                </div>
                
                <div class="carousel-inner">
                    <!-- Slide 1: Major Health Boards -->
                    <div class="carousel-item active">
                        <div class="row justify-content-center">
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-hospital text-primary" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Cardiff and Vale UHB</h5>
                                    <p class="text-muted">Serving Cardiff, Vale of Glamorgan and beyond with innovative healthcare solutions</p>
                                    <a href="solutions.html?org=Cardiff" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-heart text-danger" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Swansea Bay UHB</h5>
                                    <p class="text-muted">Leading digital health innovation across Swansea Bay region</p>
                                    <a href="solutions.html?org=Swansea" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-stethoscope text-success" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Aneurin Bevan UHB</h5>
                                    <p class="text-muted">Transforming healthcare delivery in Gwent with cutting-edge technology</p>
                                    <a href="solutions.html?org=AneurinBevan" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slide 2: Regional Health Boards -->
                    <div class="carousel-item">
                        <div class="row justify-content-center">
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-mountain text-info" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Betsi Cadwaladr UHB</h5>
                                    <p class="text-muted">Comprehensive healthcare solutions across North Wales</p>
                                    <a href="solutions.html?org=BetsiCadwaladr" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-bridge text-warning" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Cwm Taf Morgannwg UHB</h5>
                                    <p class="text-muted">Digital health solutions for the valleys and surrounding communities</p>
                                    <a href="solutions.html?org=CwmTaf" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-water text-primary" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Hywel Dda UHB</h5>
                                    <p class="text-muted">Healthcare innovation across West Wales communities</p>
                                    <a href="solutions.html?org=HywelDda" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slide 3: National Organizations -->
                    <div class="carousel-item">
                        <div class="row justify-content-center">
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-leaf text-success" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Powys Teaching Health Board</h5>
                                    <p class="text-muted">Rural healthcare solutions and community-focused innovations</p>
                                    <a href="solutions.html?org=Powys" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fas fa-code text-dark" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>Digital Health and Care Wales</h5>
                                    <p class="text-muted">National digital transformation and infrastructure solutions</p>
                                    <a href="solutions.html?org=DHCW" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>View Solutions
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="health-board-card text-center p-4">
                                    <div class="health-board-icon mb-3">
                                        <i class="fab fa-github text-secondary" style="font-size: 3rem;"></i>
                                    </div>
                                    <h5>GitHub GIG Cymru</h5>
                                    <p class="text-muted">Open source collaboration hub for Welsh healthcare innovation</p>
                                    <a href="https://github.com/GIGCymru" target="_blank" class="btn btn-outline-primary">
                                        <i class="fab fa-github me-2"></i>Visit GitHub
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="carousel-control-prev" type="button" data-bs-target="#healthBoardsCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#healthBoardsCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </section>

    <!-- Featured Solutions Section -->
    <section class="featured-solutions py-5 bg-light mt-5">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-5">
                <h2>Featured Solutions</h2>
                <small class="text-muted">
                    <i class="fas fa-star me-1"></i>
                    Automatically selected based on quality criteria
                </small>
            </div>
            
            <div id="featuredSolutionsList" class="row">
                <!-- Featured solutions will be loaded here dynamically -->
            </div>
            
            <!-- Fallback content if no featured solutions qualify -->
            <div id="featuredFallback" class="row" style="display: none;">
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="assets/img/information.jpg" class="card-img-top" alt="ED Analysis Forecast">
                        <div class="card-body">
                            <h5 class="card-title">ED Analysis Forecast</h5>
                            <p class="card-text">Advanced emergency department forecasting tools to predict patient flow and optimize resource allocation.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="assets/img/network image.jpg" class="card-img-top" alt="Data Analytics Platform">
                        <div class="card-body">
                            <h5 class="card-title">Data Analytics Platform</h5>
                            <p class="card-text">Comprehensive analytics solution for healthcare data processing and visualization.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="assets/img/information.jpg" class="card-img-top" alt="Clinical Decision Support">
                        <div class="card-body">
                            <h5 class="card-title">Clinical Decision Support</h5>
                            <p class="card-text">AI-powered tools to assist healthcare professionals in making informed clinical decisions.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="d-flex footer-navbar col-12">
                <div class="col-lg-12 mb-12 p-2 flex-fill footer-logo">
                    <img class="nav-large-image" src="assets/img/nhswales_logo_black and white.jpg" alt="NHS Wales | GIG CYMRU Logo">
                </div>
                
                <section class="p-2 flex-fill footer-section">
                    <ul class="justify-content-center">
                        <li><a href="https://dhcw.nhs.wales//use-of-site/accessibility/" class="nav-link" target="_self">Accessibility statement</a></li>
							
								<li><a href="https://dhcw.nhs.wales//use-of-site/terms-of-use/" class="nav-link" target="_self">Terms of use</a></li>
							
								<li><a href="https://dhcw.nhs.wales//use-of-site/freedom-of-information/" class="nav-link" target="_self">Freedom of information</a></li>
							
								<li><a href="https://dhcw.nhs.wales//use-of-site/privacy-policy/" class="nav-link" target="_self">Privacy Policy</a></li>
                    </ul>
                </section>
            </div>

            <div class="builtBy">
                Built by <a href="https://dhcw.nhs.wales/our-programmes/national-data-resource1/" target="_self">NDR - National Data Resource</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Fetch and display metrics
        async function fetchMetrics() {
            try {
                const response = await fetch('data/repositories.json');
                const repositories = await response.json();
                
                // Calculate real metrics from the data
                const totalSolutions = repositories.length;
                const totalStars = repositories.reduce((sum, repo) => sum + repo.stargazers_count, 0);
                const totalForks = repositories.reduce((sum, repo) => sum + repo.forks_count, 0);
                const organisations = new Set(repositories.map(repo => repo.owner.login));
                const totalOrganisations = organisations.size;
                
                // Calculate additional meaningful metrics
                const activeRepos = repositories.filter(repo => {
                    const lastUpdate = new Date(repo.updated_at);
                    const sixMonthsAgo = new Date();
                    sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
                    return lastUpdate > sixMonthsAgo;
                }).length;
                
                const languagesUsed = new Set(
                    repositories
                        .map(repo => repo.language)
                        .filter(lang => lang !== null)
                ).size;
                
                // Calculate total issues and collaborative activity
                const totalIssues = repositories.reduce((sum, repo) => sum + (repo.open_issues_count || 0), 0);
                const collaborativeRepos = repositories.filter(repo => repo.forks_count > 0 || repo.stargazers_count > 0).length;

                const metricsHtml = `
                    <div class="col-md-3"><div class="metric-card"><h3>${totalSolutions}</h3><p>Open Solutions</p></div></div>
                    <div class="col-md-3"><div class="metric-card"><h3>${totalOrganisations}</h3><p>NHS Wales Boards</p></div></div>
                    <div class="col-md-3"><div class="metric-card"><h3>${activeRepos}</h3><p>Active Projects</p></div></div>
                    <div class="col-md-3"><div class="metric-card"><h3>${collaborativeRepos}</h3><p>Collaborative Tools</p></div></div>
                `;
                document.getElementById('metrics').innerHTML = metricsHtml;

                // Load featured solutions
                displayFeaturedSolutions(repositories);

            } catch (error) {
                console.error('Error fetching metrics:', error);
                document.getElementById('metrics').innerHTML = '<p class="text-danger">Could not load statistics.</p>';
            }
        }

        // Display featured solutions based on enhanced data
        function displayFeaturedSolutions(repositories) {
            const featuredContainer = document.getElementById('featuredSolutionsList');
            const fallbackContainer = document.getElementById('featuredFallback');
            
            // Get repositories marked as featured and select 3 at random
            const allFeaturedRepos = repositories.filter(repo => repo.featured === true);
            
            // Shuffle and select 3 random featured solutions
            const shuffledFeatured = allFeaturedRepos.sort(() => 0.5 - Math.random());
            const featuredRepos = shuffledFeatured.slice(0, 3); // Show exactly 3 random featured solutions
            
            if (featuredRepos.length > 0) {
                featuredContainer.innerHTML = featuredRepos.map(repo => createFeaturedCard(repo)).join('');
                featuredContainer.style.display = 'flex';
                fallbackContainer.style.display = 'none';
            } else {
                featuredContainer.style.display = 'none';
                fallbackContainer.style.display = 'flex';
            }
        }

        // Create featured solution card
        function createFeaturedCard(repo) {
            const isPublic = repo.private === false;
            const lastUpdated = new Date(repo.updated_at).toLocaleDateString('en-GB');
            const allTags = repo.all_tags || [...(repo.topics || []), ...(repo.generated_tags || [])];
            const displayTags = allTags.slice(0, 3); // Show first 3 tags
            const qualityScore = repo.quality_score || 0;
            
            // Choose appropriate image based on tags or default
            let cardImage = 'assets/img/information.jpg';
            const tagString = allTags.join(' ').toLowerCase();
            if (tagString.includes('analytics') || tagString.includes('data')) {
                cardImage = 'assets/img/network image.jpg';
            }
            
            return `
                <div class="col-md-4 mb-4">
                    <div class="card h-100 featured-card">
                        <img src="${cardImage}" class="card-img-top" alt="${repo.name}">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="card-title">${repo.name}</h5>
                                <span class="badge ${isPublic ? 'bg-success' : 'bg-primary'} ms-2">
                                    <i class="fas ${isPublic ? 'fa-globe' : 'fa-lock'} me-1"></i>
                                    ${isPublic ? 'PUBLIC' : 'INTERNAL'}
                                </span>
                            </div>
                            
                            <p class="card-text text-muted">
                                ${repo.description || 'NHS Wales healthcare solution providing essential functionality for clinical and administrative workflows.'}
                            </p>
                            
                            <!-- Quality Score -->
                            <div class="mb-2">
                                <span class="badge ${qualityScore >= 80 ? 'bg-success' : qualityScore >= 60 ? 'bg-warning text-dark' : 'bg-secondary'} me-2">
                                    <i class="fas fa-star me-1"></i>
                                    Quality: ${qualityScore}/100
                                </span>
                                <i class="fas fa-crown text-warning" title="Featured Solution"></i>
                            </div>
                            
                            <!-- Tags -->
                            <div class="mb-3">
                                ${displayTags.map(tag => {
                                    const isGenerated = repo.generated_tags && repo.generated_tags.includes(tag);
                                    return `<span class="badge ${isGenerated ? 'bg-info' : 'bg-secondary'} me-1 mb-1" title="${isGenerated ? 'AI-generated tag' : 'User-defined tag'}">${tag}</span>`;
                                }).join('')}
                                ${allTags.length > 3 ? `<span class="badge bg-light text-dark">+${allTags.length - 3} more</span>` : ''}
                            </div>
                            
                            <!-- Organization and Last Updated -->
                            <div class="mb-3">
                                <small class="text-muted d-block">
                                    <i class="fas fa-building me-1"></i>
                                    ${getOrganisationFullName(repo.owner.login)}
                                </small>
                                <small class="text-muted">
                                    <i class="fas fa-clock me-1"></i>
                                    Updated: ${lastUpdated}
                                </small>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="mt-auto">
                                <a href="${repo.html_url}" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="fab fa-github me-1"></i>
                                    View Repository
                                </a>
                                ${!isPublic ? `<a href="signup.html" class="btn btn-primary btn-sm ms-2">
                                    <i class="fas fa-lock me-1"></i>
                                    Sign In Required
                                </a>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Helper function to map organization names
        function getOrganisationFullName(login) {
            const orgMapping = {
                'NHS-Executive': 'NHS Executive',
                'DHCW-Digital-Health-and-Care-Wales': 'Digital Health and Care Wales',
                'GIGCymru': 'GitHub GIG Cymru',
                'NHS-Wales': 'NHS Wales',
                'Betsi-Cadwaladr-UHB': 'Betsi Cadwaladr UHB',
                'Cardiff-and-Vale-UHB': 'Cardiff and Vale UHB',
                'Cwm-Taf-Morgannwg-UHB': 'Cwm Taf Morgannwg UHB',
                'Hywel-Dda-UHB': 'Hywel Dda UHB',
                'Swansea-Bay-UHB': 'Swansea Bay UHB',
                'Aneurin-Bevan-UHB': 'Aneurin Bevan UHB',
                'Powys-Teaching-HB': 'Powys Teaching Health Board'
            };
            return orgMapping[login] || login.replace(/-/g, ' ');
        }

        document.addEventListener('DOMContentLoaded', fetchMetrics);
    </script>

</body>
</html>